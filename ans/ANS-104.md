# ANS-104: Naming

Status: Draft

## Abstract

This document describes a naming system on top of Arweave, for use with DNS, to establish a system capable of serving a decentralized application (DApp) on a custom domain, allowing domain owners to register & update which transaction a domain "points" to, in a trustless way, not involving oracles or shared secrets. Such a system can be run by any interested party, and lends itself well to integration with an SSL provider, like LetsEncrypt.

Such a system will operate as a reverse proxy, to fetch and serve the contents from the Arweave network. As no confidential data is exchanged between the client and the server, and only via transactions, the reverse proxy will never be privy to any information it shouldn't see.

XXX You need to trust the resolver to serve the correct contents -- is there any way to eliminate this need for trust?

## Motivation

A standardized naming system offers numerous benefits to DApps hosted on Arweave:

- The use of custom domain names instead of unwieldy transaction-based URLs.

- Fast updates when deploying a new version of an application.

## Reference Implementation

There is a [reference implementation](https://github.com/ArweaveTeam/arweave-resolver) for a resolver.

## Specification

### 1. Domain ownership

A user must first prove ownership of the domain they would like to employ for serving their DApp. To do so, they must sign the domain name using their private key, and set a `TXT` record for their domain, with the resulting signature as the value.

For the apex/root domain, the `TXT` record must be `_arweave`, and for subdomains, `_arweave.[subdomain]`.

For example, if we wanted to register mydapp.com, as well as beta.mydapp.com, we would need to set up 2 `TXT` records:

* `_arweave.mydapp.com`
* `_arweave.beta.mydapp.com`

This allows separate owners for different subdomains and the apex domain.

XXX Should we allow someone who has registered the apex domain to register subdomains without explicitly registering those as well?

### 2. Updating records

Once ownership has been established, updating the record takes place via posting transactions to the network. These must be posted by the same private key as was used to prove ownership in the first place.

#### 2.1 Transaction format

An update transaction must include the name of the record, as well as the transaction hash it should resolve to. Both of these are set via tags:

- `Arweave-Domain` a string of the domain-, or sub-domain name.
- `Arweave-Hash` a string of the transaction hash the domain should resolve to.

When the resolver observes a transaction matching these fields, it must first verify that the transaction was signed by the domain owner (see #1), and if so, update its own internal accounting for where the domain resolves to.

